import { CallItem, TranscriptLine } from '@/types/calls';
import { SUITE_ID, OFFICE_ID } from '@/types/common';
import { callId } from '@/lib/ids';

const now = new Date();
const hoursAgo = (h: number) => new Date(now.getTime() - h * 3600000).toISOString();
const daysAgo = (d: number) => new Date(now.getTime() - d * 86400000).toISOString();

export const calls: CallItem[] = [
  {
    id: callId(1),
    type: 'call',
    callType: 'inbound',
    callerName: 'Michael Chen',
    callerNumber: '14155551234',
    duration: '12:34',
    outcome: 'Completed',
    timestamp: hoursAgo(1),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Sales'],
    priority: 'High',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0016'],
    hasSummary: true,
    createdAt: hoursAgo(1),
    updatedAt: hoursAgo(1),
  },
  {
    id: callId(2),
    type: 'call',
    callType: 'missed',
    callerName: 'Sarah Johnson',
    callerNumber: '14155552345',
    duration: '0:00',
    outcome: 'Missed',
    timestamp: hoursAgo(2),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Ops'],
    priority: 'Medium',
    status: 'Open',
    linkedReceiptIds: [],
    hasSummary: false,
    createdAt: hoursAgo(2),
    updatedAt: hoursAgo(2),
  },
  {
    id: callId(3),
    type: 'call',
    callType: 'outbound',
    callerName: 'David Martinez',
    callerNumber: '14155553456',
    duration: '8:22',
    outcome: 'Completed',
    timestamp: hoursAgo(4),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Finance'],
    priority: 'Medium',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0017'],
    hasSummary: true,
    createdAt: hoursAgo(4),
    updatedAt: hoursAgo(4),
  },
  {
    id: callId(4),
    type: 'call',
    callType: 'voicemail',
    callerName: 'Emily Watson',
    callerNumber: '14155554567',
    duration: '1:45',
    outcome: 'Needs follow-up',
    timestamp: hoursAgo(6),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Legal'],
    priority: 'High',
    status: 'Waiting',
    linkedReceiptIds: ['RCP_0018'],
    hasSummary: true,
    createdAt: hoursAgo(6),
    updatedAt: hoursAgo(6),
  },
  {
    id: callId(5),
    type: 'call',
    callType: 'inbound',
    callerName: 'Robert Kim',
    callerNumber: '14155555678',
    duration: '23:11',
    outcome: 'Completed',
    timestamp: hoursAgo(8),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Sales', 'Ops'],
    priority: 'High',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0019', 'RCP_0020'],
    hasSummary: true,
    createdAt: hoursAgo(8),
    updatedAt: hoursAgo(8),
  },
  {
    id: callId(6),
    type: 'call',
    callType: 'blocked',
    callerName: 'Unknown Caller',
    callerNumber: '14155556789',
    duration: '0:00',
    outcome: 'Blocked',
    timestamp: hoursAgo(10),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Security'],
    priority: 'Low',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0021'],
    hasSummary: false,
    createdAt: hoursAgo(10),
    updatedAt: hoursAgo(10),
  },
  {
    id: callId(7),
    type: 'call',
    callType: 'outbound',
    callerName: 'Jennifer Lee',
    callerNumber: '14155557890',
    duration: '15:33',
    outcome: 'Completed',
    timestamp: daysAgo(1),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Finance'],
    priority: 'Medium',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0022'],
    hasSummary: true,
    createdAt: daysAgo(1),
    updatedAt: daysAgo(1),
  },
  {
    id: callId(8),
    type: 'call',
    callType: 'inbound',
    callerName: 'Thomas Brown',
    callerNumber: '14155558901',
    duration: '5:12',
    outcome: 'Needs follow-up',
    timestamp: daysAgo(1),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Ops'],
    priority: 'Medium',
    status: 'Waiting',
    linkedReceiptIds: ['RCP_0023'],
    hasSummary: true,
    createdAt: daysAgo(1),
    updatedAt: daysAgo(1),
  },
  {
    id: callId(9),
    type: 'call',
    callType: 'missed',
    callerName: 'Amanda White',
    callerNumber: '14155559012',
    duration: '0:00',
    outcome: 'Missed',
    timestamp: daysAgo(2),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Sales'],
    priority: 'Low',
    status: 'Open',
    linkedReceiptIds: [],
    hasSummary: false,
    createdAt: daysAgo(2),
    updatedAt: daysAgo(2),
  },
  {
    id: callId(10),
    type: 'call',
    callType: 'inbound',
    callerName: 'Chris Taylor',
    callerNumber: '14155550123',
    duration: '18:45',
    outcome: 'Completed',
    timestamp: daysAgo(3),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Legal', 'Finance'],
    priority: 'High',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0024', 'RCP_0025'],
    hasSummary: true,
    createdAt: daysAgo(3),
    updatedAt: daysAgo(3),
  },
  {
    id: callId(11),
    type: 'call',
    callType: 'voicemail',
    callerName: 'Lisa Anderson',
    callerNumber: '14155551111',
    duration: '2:30',
    outcome: 'Needs follow-up',
    timestamp: daysAgo(4),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Ops'],
    priority: 'Medium',
    status: 'Waiting',
    linkedReceiptIds: ['RCP_0026'],
    hasSummary: true,
    createdAt: daysAgo(4),
    updatedAt: daysAgo(4),
  },
  {
    id: callId(12),
    type: 'call',
    callType: 'outbound',
    callerName: 'Mark Wilson',
    callerNumber: '14155552222',
    duration: '9:55',
    outcome: 'Completed',
    timestamp: daysAgo(5),
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    tags: ['Sales'],
    priority: 'Low',
    status: 'Resolved',
    linkedReceiptIds: ['RCP_0027'],
    hasSummary: true,
    createdAt: daysAgo(5),
    updatedAt: daysAgo(5),
  },
];

export function getCallTranscript(id: string): TranscriptLine[] {
  return [
    { id: 'tr_1', speaker: 'Ava', content: 'Thank you for calling Zenith Solutions. How may I assist you today?', timestamp: '0:00' },
    { id: 'tr_2', speaker: 'Caller', content: 'Hi, I am calling about our pending invoice from last month.', timestamp: '0:08' },
    { id: 'tr_3', speaker: 'Ava', content: 'I can help you with that. Let me pull up your account details.', timestamp: '0:15' },
    { id: 'tr_4', speaker: 'Caller', content: 'Sure, the account should be under Acme Corporation.', timestamp: '0:22' },
    { id: 'tr_5', speaker: 'Ava', content: 'I found your account. I see an invoice dated December 15th for $12,500.', timestamp: '0:35' },
    { id: 'tr_6', speaker: 'Caller', content: 'That is the one. We need to discuss the payment terms.', timestamp: '0:45' },
    { id: 'tr_7', speaker: 'Ava', content: 'Of course. I will flag this for our billing specialist to follow up with you.', timestamp: '0:55' },
    { id: 'tr_8', speaker: 'Caller', content: 'Perfect. When can I expect a callback?', timestamp: '1:05' },
    { id: 'tr_9', speaker: 'Ava', content: 'Within 24 hours. Is there anything else I can help with?', timestamp: '1:12' },
    { id: 'tr_10', speaker: 'Caller', content: 'No, that will be all. Thank you.', timestamp: '1:20' },
    { id: 'tr_11', speaker: 'Ava', content: 'Thank you for calling. Have a great day.', timestamp: '1:25' },
    { id: 'tr_12', speaker: 'System', content: 'Call ended. Duration: 1:30', timestamp: '1:30' },
  ];
}

export function getCallSummary(id: string): string {
  return 'Customer called regarding pending invoice #INV-2024-1215 for $12,500. Requested discussion of payment terms. Action: Flagged for billing specialist follow-up within 24 hours. Customer appeared satisfied with resolution path.';
}

export function getCallNextSteps(id: string): string[] {
  return [
    'Billing specialist to call back within 24 hours',
    'Review payment terms flexibility for this account',
    'Prepare alternative payment schedule options',
    'Update CRM with call notes',
  ];
}
