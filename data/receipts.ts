import { Receipt, PlanStep, Evidence } from '@/types/receipts';
import { SUITE_ID, OFFICE_ID } from '@/types/common';
import { receiptId } from '@/lib/ids';

const now = new Date();
const hoursAgo = (h: number) => new Date(now.getTime() - h * 3600000).toISOString();
const daysAgo = (d: number) => new Date(now.getTime() - d * 86400000).toISOString();

export const receipts: Receipt[] = [
  // Payment Receipts (8)
  {
    id: receiptId(1),
    type: 'Payment',
    status: 'Success',
    title: 'Invoice payment processed — Acme Corp',
    timestamp: hoursAgo(2),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Process approved payment for invoice #INV-2026-0089',
    tags: ['Finance'],
    linkedInboxId: 'OFF_0004',
    createdAt: hoursAgo(2),
    updatedAt: hoursAgo(2),
  },
  {
    id: receiptId(2),
    type: 'Payment',
    status: 'Success',
    title: 'Vendor payment sent — Zenith Supplies',
    timestamp: hoursAgo(6),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Execute approved vendor payment for supplies order',
    tags: ['Finance', 'Ops'],
    linkedInboxId: 'OFF_0001',
    createdAt: hoursAgo(6),
    updatedAt: hoursAgo(6),
  },
  {
    id: receiptId(3),
    type: 'Payment',
    status: 'Pending',
    title: 'Expense reimbursement pending',
    timestamp: hoursAgo(12),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Process employee expense reimbursement request',
    tags: ['Finance'],
    createdAt: hoursAgo(12),
    updatedAt: hoursAgo(12),
  },
  {
    id: receiptId(4),
    type: 'Payment',
    status: 'Failed',
    title: 'Payment declined — insufficient funds',
    timestamp: daysAgo(1),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Attempt recurring subscription payment',
    tags: ['Finance'],
    createdAt: daysAgo(1),
    updatedAt: daysAgo(1),
  },
  {
    id: receiptId(5),
    type: 'Payment',
    status: 'Success',
    title: 'Subscription renewed — Cloud Services',
    timestamp: daysAgo(2),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Renew annual cloud infrastructure subscription',
    tags: ['Finance', 'Ops'],
    createdAt: daysAgo(2),
    updatedAt: daysAgo(2),
  },
  {
    id: receiptId(6),
    type: 'Payment',
    status: 'Blocked',
    title: 'Payment blocked — policy violation',
    timestamp: daysAgo(3),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Block unauthorized payment attempt exceeding daily limit',
    tags: ['Finance', 'Security'],
    createdAt: daysAgo(3),
    updatedAt: daysAgo(3),
  },
  {
    id: receiptId(7),
    type: 'Payment',
    status: 'Success',
    title: 'Insurance premium paid',
    timestamp: daysAgo(5),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Process quarterly insurance premium payment',
    tags: ['Finance', 'Legal'],
    linkedInboxId: 'OFF_0011',
    createdAt: daysAgo(5),
    updatedAt: daysAgo(5),
  },
  {
    id: receiptId(8),
    type: 'Payment',
    status: 'Success',
    title: 'Payroll processed — January 2026',
    timestamp: daysAgo(7),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Execute monthly payroll for all employees',
    tags: ['Finance'],
    createdAt: daysAgo(7),
    updatedAt: daysAgo(7),
  },
  // Contract Receipts (8)
  {
    id: receiptId(9),
    type: 'Contract',
    status: 'Success',
    title: 'Vendor agreement signed — Zenith Supplies',
    timestamp: hoursAgo(12),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Complete DocuSign signature workflow for vendor agreement',
    tags: ['Legal', 'Ops'],
    linkedInboxId: 'OFF_0005',
    createdAt: hoursAgo(12),
    updatedAt: hoursAgo(12),
  },
  {
    id: receiptId(10),
    type: 'Contract',
    status: 'Pending',
    title: 'Lease renewal awaiting signature',
    timestamp: hoursAgo(1),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Prepare lease renewal documents for founder approval',
    tags: ['Legal', 'Finance'],
    linkedInboxId: 'OFF_0002',
    createdAt: hoursAgo(1),
    updatedAt: hoursAgo(1),
  },
  {
    id: receiptId(11),
    type: 'Contract',
    status: 'Success',
    title: 'NDA executed — TechStart Inc',
    timestamp: daysAgo(2),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Execute mutual NDA for partnership discussions',
    tags: ['Legal', 'Sales'],
    createdAt: daysAgo(2),
    updatedAt: daysAgo(2),
  },
  {
    id: receiptId(12),
    type: 'Contract',
    status: 'Success',
    title: 'Client MSA signed — Apex Industries',
    timestamp: daysAgo(4),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Complete master services agreement for new client',
    tags: ['Legal', 'Sales'],
    createdAt: daysAgo(4),
    updatedAt: daysAgo(4),
  },
  {
    id: receiptId(13),
    type: 'Contract',
    status: 'Blocked',
    title: 'Contract blocked — missing approval',
    timestamp: daysAgo(5),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Block contract execution pending legal review',
    tags: ['Legal', 'Security'],
    createdAt: daysAgo(5),
    updatedAt: daysAgo(5),
  },
  {
    id: receiptId(14),
    type: 'Contract',
    status: 'Success',
    title: 'Amendment signed — Cloud Provider',
    timestamp: daysAgo(6),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Execute service agreement amendment',
    tags: ['Legal', 'Ops'],
    createdAt: daysAgo(6),
    updatedAt: daysAgo(6),
  },
  {
    id: receiptId(15),
    type: 'Contract',
    status: 'Success',
    title: 'Consulting agreement executed',
    timestamp: daysAgo(8),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Complete consulting services agreement',
    tags: ['Legal'],
    createdAt: daysAgo(8),
    updatedAt: daysAgo(8),
  },
  {
    id: receiptId(16),
    type: 'Contract',
    status: 'Success',
    title: 'Insurance policy renewed',
    timestamp: daysAgo(10),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Renew annual business liability insurance',
    tags: ['Legal', 'Finance'],
    createdAt: daysAgo(10),
    updatedAt: daysAgo(10),
  },
  // Communication Receipts (8)
  {
    id: receiptId(17),
    type: 'Communication',
    status: 'Success',
    title: 'Invoice reminder sent — Acme Corp',
    timestamp: hoursAgo(8),
    actor: 'Quinn',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Send automated payment reminder for overdue invoice',
    tags: ['Finance'],
    linkedInboxId: 'OFF_0004',
    createdAt: hoursAgo(8),
    updatedAt: hoursAgo(8),
  },
  {
    id: receiptId(18),
    type: 'Communication',
    status: 'Success',
    title: 'Meeting scheduled — Client review',
    timestamp: hoursAgo(16),
    actor: 'Clara',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Schedule quarterly business review with client',
    tags: ['Sales', 'Ops'],
    createdAt: hoursAgo(16),
    updatedAt: hoursAgo(16),
  },
  {
    id: receiptId(19),
    type: 'Communication',
    status: 'Success',
    title: 'Proposal sent — TechStart partnership',
    timestamp: daysAgo(1),
    actor: 'Piper',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Send partnership proposal document',
    tags: ['Sales'],
    linkedInboxId: 'OFF_0006',
    createdAt: daysAgo(1),
    updatedAt: daysAgo(1),
  },
  {
    id: receiptId(20),
    type: 'Communication',
    status: 'Success',
    title: 'Welcome email sent — New client',
    timestamp: daysAgo(2),
    actor: 'Nara',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Send onboarding welcome package to new client',
    tags: ['Sales', 'Ops'],
    createdAt: daysAgo(2),
    updatedAt: daysAgo(2),
  },
  {
    id: receiptId(21),
    type: 'Communication',
    status: 'Blocked',
    title: 'Email blocked — unapproved recipient',
    timestamp: daysAgo(3),
    actor: 'Eli',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Block email to external recipient not in approved list',
    tags: ['Security'],
    createdAt: daysAgo(3),
    updatedAt: daysAgo(3),
  },
  {
    id: receiptId(22),
    type: 'Communication',
    status: 'Success',
    title: 'Survey sent — Client satisfaction',
    timestamp: daysAgo(4),
    actor: 'Nara',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Distribute quarterly client satisfaction survey',
    tags: ['Sales'],
    linkedInboxId: 'OFF_0009',
    createdAt: daysAgo(4),
    updatedAt: daysAgo(4),
  },
  {
    id: receiptId(23),
    type: 'Communication',
    status: 'Success',
    title: 'Training reminder sent',
    timestamp: daysAgo(6),
    actor: 'Clara',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Send compliance training reminder to team',
    tags: ['Ops', 'Security'],
    linkedInboxId: 'OFF_0012',
    createdAt: daysAgo(6),
    updatedAt: daysAgo(6),
  },
  {
    id: receiptId(24),
    type: 'Communication',
    status: 'Success',
    title: 'Marketing campaign launched',
    timestamp: daysAgo(7),
    actor: 'Nova',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Launch Q1 digital marketing campaign',
    tags: ['Sales'],
    linkedInboxId: 'OFF_0010',
    createdAt: daysAgo(7),
    updatedAt: daysAgo(7),
  },
  // Call Receipts (6)
  {
    id: receiptId(25),
    type: 'Call',
    status: 'Success',
    title: 'Call completed — Michael Chen',
    timestamp: hoursAgo(1),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Handle inbound call and create follow-up actions',
    tags: ['Sales'],
    linkedInboxId: 'CALL_0001',
    createdAt: hoursAgo(1),
    updatedAt: hoursAgo(1),
  },
  {
    id: receiptId(26),
    type: 'Call',
    status: 'Success',
    title: 'Call summary ready — Cold call follow-up',
    timestamp: hoursAgo(4),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Generate call summary and action items',
    tags: ['Sales'],
    linkedInboxId: 'CALL_0003',
    createdAt: hoursAgo(4),
    updatedAt: hoursAgo(4),
  },
  {
    id: receiptId(27),
    type: 'Call',
    status: 'Success',
    title: 'Voicemail transcribed — Emily Watson',
    timestamp: hoursAgo(6),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Transcribe voicemail and flag for follow-up',
    tags: ['Legal'],
    linkedInboxId: 'CALL_0004',
    createdAt: hoursAgo(6),
    updatedAt: hoursAgo(6),
  },
  {
    id: receiptId(28),
    type: 'Call',
    status: 'Blocked',
    title: 'Spam call blocked',
    timestamp: hoursAgo(10),
    actor: 'Clara',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Block identified spam caller',
    tags: ['Security'],
    linkedInboxId: 'CALL_0006',
    createdAt: hoursAgo(10),
    updatedAt: hoursAgo(10),
  },
  {
    id: receiptId(29),
    type: 'Call',
    status: 'Success',
    title: 'Conference call recorded — Team standup',
    timestamp: daysAgo(1),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Record and summarize team standup meeting',
    tags: ['Ops'],
    createdAt: daysAgo(1),
    updatedAt: daysAgo(1),
  },
  {
    id: receiptId(30),
    type: 'Call',
    status: 'Success',
    title: 'Client call completed — Robert Kim',
    timestamp: daysAgo(3),
    actor: 'Ava',
    suiteId: SUITE_ID,
    officeId: OFFICE_ID,
    intent: 'Complete client consultation call',
    tags: ['Sales', 'Finance'],
    linkedInboxId: 'CALL_0010',
    createdAt: daysAgo(3),
    updatedAt: daysAgo(3),
  },
];

export function getReceiptPlanSteps(receiptId: string): PlanStep[] {
  return [
    { id: 'step_1', step: 1, description: 'Verify authorization and permissions', status: 'completed' },
    { id: 'step_2', step: 2, description: 'Validate request against policy rules', status: 'completed' },
    { id: 'step_3', step: 3, description: 'Check daily limits and thresholds', status: 'completed' },
    { id: 'step_4', step: 4, description: 'Execute primary action', status: 'completed' },
    { id: 'step_5', step: 5, description: 'Generate audit trail entry', status: 'completed' },
    { id: 'step_6', step: 6, description: 'Send confirmation notification', status: 'completed' },
    { id: 'step_7', step: 7, description: 'Update linked records', status: 'completed' },
  ];
}

export function getReceiptEvidence(receiptId: string): Evidence[] {
  return [
    { id: 'evi_1', type: 'document', name: 'Authorization_Request.pdf', url: '#' },
    { id: 'evi_2', type: 'log', name: 'Execution_Log.txt', snippet: 'Action completed successfully at 2026-01-11T14:32:00Z' },
    { id: 'evi_3', type: 'screenshot', name: 'Confirmation_Screen.png', url: '#' },
  ];
}

export function getReceiptPolicyEvaluation(receiptId: string): string {
  return 'This action was evaluated against the following policies:\n\n• Daily transaction limit: PASSED (Transaction $2,500 < Limit $10,000)\n• Approved vendor list: PASSED (Vendor verified in system)\n• Dual approval requirement: PASSED (Founder approval on file)\n• Business hours restriction: PASSED (Executed within allowed hours)\n• Risk assessment: LOW RISK (Standard transaction pattern)\n\nNo policy violations detected. Action approved for execution.';
}
